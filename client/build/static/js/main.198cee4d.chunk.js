(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{163:function(e,t,n){},165:function(e,t,n){},205:function(e,t,n){},211:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(79),r=n.n(o),c=n(17),s=n(19),i=n(48),l=n(20),d=n(169),u=n(170),j=n(148),p=n.n(j),b=new(function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"getProfile",value:function(){return p()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return p()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),m=(n(159),n(243)),x=(n(205),n(4));var g=function(){console.log("NAV TABS!!!!!!!");var e=Object(a.useState)("home"),t=Object(c.a)(e,2),n=t[0],o=t[1],r=window.location.pathname,s=("/"===r||r.substr(1),function(e,t){var n=t.name;return o(n)});return Object(x.jsx)("div",{className:"nav-bar-home",style:{borderBottomStyle:"outset"},children:Object(x.jsxs)(m.a,{pointing:!0,secondary:!0,children:[Object(x.jsx)(m.a.Item,{className:"home",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000"},name:"home",active:"home"===n,onClick:s,as:i.b,to:"/"}),Object(x.jsxs)(m.a.Menu,{position:"right",children:[Object(x.jsx)(m.a.Item,{className:"login",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000"},name:"login",active:"login"===n,onClick:s,as:i.b,to:"/login"}),Object(x.jsx)(m.a.Item,{className:"signup",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000"},name:"signup",active:"signup"===n,onClick:s,as:i.b,to:"/signup"})]})]})})},h=n(249);n(211),n.p;var O,v,f,w,S=function(){return Object(x.jsxs)("div",{style:{margin:"0",maxHeight:"100%",backgroundColor:"#1c2529",width:"100%"},className:"HomePage",children:[Object(x.jsx)(h.a,{style:{maxWidth:"100%"},children:Object(x.jsx)("img",{style:{backgroundPosition:"center",backgroundSize:"cover",borderBottomStyle:"outset",margin:"0 0 -5 0"},className:"img",src:"https://i.imgur.com/US1bcVM.jpg"})}),Object(x.jsx)("h1",{className:"about",style:{textShadow:"-1px 1px 2px #000",margin:"-5% 45% 0 45%",fontFamily:"Sacco Condensed",color:"#fdd05a",fontSize:"12vw",letterSpacing:".5vw"},children:"ABOUT"}),Object(x.jsx)("p",{style:{textShadow:"-5px 1px 2px #000",fontFamily:"Menlo",color:"#fdd05a",textAlign:"center",fontSize:"5vw",margin:"3% 10% 10% 10%",letterSpacing:"1vw"},children:"A space for musicians to meet other musicians."})]})},y=n(30),k=n.n(y),I=n(50),C=n(40),D=n(242),z=n(250),$=n(253),E=n(76),N=n(245),_=Object(N.a)(O||(O=Object(E.a)(["\nmutation login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    token\n    user {\n      _id\n    username\n    \n    }\n  }\n}\n"]))),P=Object(N.a)(v||(v=Object(E.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n       \n      }\n    }\n  }\n"]))),V=Object(N.a)(f||(f=Object(E.a)(["\n mutation addPost($user_id: String!, $author: String!, $instrument: String!, $description:String!, $genre: String!, $title: String!, $contact: String! ) {\n  addPost(user_id: $user_id, author: $author,  instrument: $instrument,description:$description, genre:$genre,title:$title, contact:$contact)\n       {\n              user_id\n              author\n              _id\n              instrument\n              description\n              genre\n              title\n              contact\n           }\n      }\n  "]))),T=Object(N.a)(w||(w=Object(E.a)(["\n  mutation removePost($postId: ID!) {\n    removePost(postId: $postId) {\n               _id\n               instrument\n              description\n              genre\n              title\n              contact\n                        \n    }\n  }\n"])));n(163);var A=function(){var e,t=Object(a.useState)({email:"",password:""}),n=Object(c.a)(t,2),o=n[0],r=n[1],i=Object($.a)(_,{update:function(e,t){console.log(t)},variable:Object(s.a)({},o)}),l=Object(c.a)(i,2),d=l[0],u=l[1].loading,j=function(e){var t=e.target,n=t.name,a=t.value;r(Object(s.a)(Object(s.a)({},o),{},Object(C.a)({},n,a)))},p=function(){var e=Object(I.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,d({variables:Object(s.a)({},o)});case 6:n=e.sent,a=n.data,console.log("data!! from mutation attempt",a),a&&(localStorage.setItem("user",a.login.user._id),localStorage.setItem("username",a.login.user.username),b.login(a.login.token)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("WE HAVE ERRR from mutation thing",e.t0),console.error(e.t0);case 16:r({email:"",password:""});case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"form-container",children:Object(x.jsxs)(D.a,(e={onSubmit:p,noValidate:!0},Object(C.a)(e,"noValidate",!0),Object(C.a)(e,"className",u?"loading":""),Object(C.a)(e,"children",[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsx)(D.a.Input,{label:"Email",placholder:"Your email address..",name:"email",type:"email",value:o.email,onChange:j}),Object(x.jsx)(D.a.Input,{label:"Password",placholder:"Your password..",name:"password",type:"password",value:o.password,onChange:j}),Object(x.jsx)(z.a,{disabled:!(o.email&&o.password),type:"submit",primary:!0,variant:"success",children:"Submit"})]),e))})};var M=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)({username:"",email:"",password:""}),i=Object(c.a)(r,2),l=i[0],d=i[1],u=Object($.a)(P,{update:function(e,t){console.log(t)},onError:function(e){o(e.graphQLErrors[0].extensions.exception.errors),console.log(e.graphQLErrors[0].extensions.exception.errors)},variable:Object(s.a)({},l)}),j=Object(c.a)(u,2),p=j[0],m=j[1].loading,g=function(e){var t=e.target,n=t.name,a=t.value;d(Object(s.a)(Object(s.a)({},l),{},Object(C.a)({},n,a)))},h=function(){var e=Object(I.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,p({variables:Object(s.a)({},l)});case 6:n=e.sent,a=n.data,console.log("data!! from mutation attempt",a),b.login(a.addUser.token),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("WE HAVE ERRR from mutation thing",e.t0),console.error(e.t0);case 16:d({username:"",email:"",password:""});case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"form-container",children:[Object(x.jsxs)(D.a,{onSubmit:function(e){h(e)},className:m?"loading":"classless",children:[Object(x.jsx)("h1",{children:"Sign Up"}),Object(x.jsx)(D.a.Input,{label:"Username",placholder:"Your username..",name:"username",type:"username",value:l.username,onChange:g}),Object(x.jsx)(D.a.Input,{label:"Email",placholder:"Your email address..",name:"email",type:"email",value:l.email,onChange:g}),Object(x.jsx)(D.a.Input,{label:"Password",placholder:"Your password..",name:"password",type:"password",value:l.password,onChange:g}),Object(x.jsx)(z.a,{disabled:!(l.username&&l.email&&l.password),type:"submit",primary:!0,variant:"success",children:"Submit"})]}),Object.keys(n).length>0&&Object(x.jsx)("div",{className:"ui error message",children:Object(x.jsx)("ul",{className:"List",children:Object.values(n).map((function(e){return Object(x.jsx)("li",{children:e},e)}))})})]})};n(220);var U,B,R=function(e){console.log("NAV HOME!!!");var t=Object(a.useState)("home"),n=Object(c.a)(t,2),o=n[0],r=n[1],s=window.location.pathname,l=("/"===s||s.substr(1),function(e,t){var n=t.name;return r(n)});return e.loggedIn,Object(x.jsx)("div",{style:{backgroundColor:"#1c2529",borderBottomStyle:"outset"},children:Object(x.jsx)(m.a,{pointing:!0,secondary:!0,children:Object(x.jsxs)(m.a.Menu,{position:"right",children:[Object(x.jsx)(m.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000"},name:"View All Posts",active:"viewallposts"===o,onClick:l,as:i.b,to:"/viewallposts"}),Object(x.jsx)(m.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000"},name:"View My Posts",active:"viewmyposts"===o,onClick:l,as:i.b,to:"/viewmyposts"}),Object(x.jsx)(m.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000"},name:"Create Post",active:"createpost"===o,onClick:l,as:i.b,to:"/createpost"}),Object(x.jsx)(m.a.Item,{className:"login",style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000"},name:"logout",active:"logout"===o,onClick:b.logout,as:i.b,to:"/"})]})})})},F=n(248),H=Object(N.a)(U||(U=Object(E.a)(["\n  query posts {\n    posts {\n      author\n      user_id\n     _id  \n     instrument\n     description\n     genre\n     title\n     contact\n    }\n  }\n "]))),Y=(Object(N.a)(B||(B=Object(E.a)(["\n  query ($postId: ID!) {\n    posts(postId: postId) {\n      author\n      user_id\n     _id  \n     instrument\n     description\n     genre\n     title\n     contact\n    }\n  }"]))),n(247)),G=n(106),L=(n(165),{card:{margin:"3px",fontFamily:"Menlo",fontSize:"1vw",padding:"5px",width:"100%",overflow:"auto",height:300,backgroundColor:"#1A252B",borderRadius:"15px",boxShadow:"2 3px 10px rgb(0 0 0 / 0.2);"}});var q=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(F.a)(H).data,s=Object(a.useState)([]),i=Object(c.a)(s,2),l=i[0],d=i[1];Object(a.useEffect)((function(){var e=localStorage.getItem("user");o(e)}),[]),Object(a.useEffect)((function(){r&&(console.log("Checking all posts",r),d(r.posts))}),[r]);var u=Object($.a)(T),j=Object(c.a)(u,1)[0],p=function(){var e=Object(I.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,j({variables:{postId:t}});case 4:n=e.sent,a=n.data,console.log("Delete post",a),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{style:{backgroundSize:"cover",margin:"0",height:"200vh",backgroundImage:"url('https://i.imgur.com/US1bcVM.jpg')",width:"100%"},children:Object(x.jsxs)("div",{children:[" "," ",l.map((function(e,t){return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(Y.a,{style:L.card,children:[Object(x.jsxs)(Y.a.Content,{children:[Object(x.jsx)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",textAlign:"center",color:"#E7DDC6",borderBottomStyle:"outset"},children:e.title}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",color:"#E7DDC6"},children:[" ",Object(x.jsx)("strong",{children:"Username:"})," ",e.author]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",color:"#E7DDC6"},children:[Object(x.jsx)("strong",{children:"Instrumrnt:"}),"  ",e.instrument]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",color:"#E7DDC6"},children:[Object(x.jsx)("strong",{children:"Genre:"})," ",e.genre]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",lineHeight:"2vw",color:"#E7DDC6"},children:[Object(x.jsx)("strong",{children:"Description:"}),"  ",e.description]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px",color:"#E7DDC6"},children:[Object(x.jsx)("strong",{children:"Contact:"}),"  ",e.contact]})]}),Object(x.jsx)(Y.a.Content,{extra:!0,children:Object(x.jsx)("div",{className:"ui two buttons",children:e.user_id===n?Object(x.jsx)(z.a,{as:"div",color:"red",floated:"right",onClick:function(){return p(e._id)},style:{width:"5px"},className:"btn",children:Object(x.jsx)(G.a,{name:"trash",style:{margin:0}})}):null})})]})},t)}))]})})};var W=function(){var e=Object(F.a)(H).data,t=Object(a.useState)([]),n=Object(c.a)(t,2),o=n[0],r=n[1];Object(a.useEffect)((function(){if(e){var t=localStorage.getItem("user");console.log("Checking all posts",e);var n=e.posts.filter((function(e){return console.log(e),e.user_id===t}));console.log(n),r(n)}}),[e]);var s=Object($.a)(T),i=Object(c.a)(s,1)[0],l=function(){var e=Object(I.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,i({variables:{postId:t}});case 4:n=e.sent,a=n.data,console.log("Delete post",a),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{style:{backgroundSize:"cover",margin:"0",height:"200vh",backgroundColor:"#1c2529",width:"100%"},children:Object(x.jsxs)("div",{children:[" "," ",o.map((function(e,t){return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(Y.a,{style:{margin:"3px",fontFamily:"Menlo",color:"#fdd05a",fontSize:"1vw",padding:"5px",width:"100%",overflow:"auto",height:300},children:[Object(x.jsxs)(Y.a.Content,{children:[Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px"},children:[" ",Object(x.jsx)("strong",{children:"Username:"})," ",e.author]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px"},children:[Object(x.jsx)("strong",{children:"Titlt:"})," ",e.title]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px"},children:[Object(x.jsx)("strong",{children:"Instrumrnt:"})," ",e.instrument]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"25px",padding:"10px"},children:[Object(x.jsx)("strong",{children:"Genre:"}),e.genre]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"20px",padding:"10px"},children:[Object(x.jsx)("strong",{children:"Description:"})," ",e.description]}),Object(x.jsxs)(Y.a.Description,{style:{fontSize:"20px",padding:"10px"},children:[Object(x.jsx)("strong",{children:"Contact:"})," ",e.contact]})]}),Object(x.jsx)(Y.a.Content,{extra:!0,children:Object(x.jsx)("div",{className:"ui two buttons",children:Object(x.jsx)(z.a,{as:"div",color:"red",floated:"right",onClick:function(){return l(e._id)},children:Object(x.jsx)(G.a,{name:"trash",style:{margin:0}})})})})]})},t)}))]})})};n(221);var J=function(){var e=Object(a.useState)({user_id:"",author:"",instrument:"",genre:"",title:"",description:"",contact:""}),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)({}),i=Object(c.a)(r,2),l=(i[0],i[1],Object($.a)(V)),d=Object(c.a)(l,2),u=d[0],j=d[1].loading;Object(a.useEffect)((function(){var e={id:localStorage.getItem("user"),username:localStorage.getItem("username")};o(Object(s.a)(Object(s.a)({},n),{},{user_id:e.id,author:e.username}))}),[]);var p=function(){var e=Object(I.a)(k.a.mark((function e(t){var a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,u({variables:Object(s.a)({},n)});case 5:a=e.sent,o=a.data,console.log(o),o&&(alert("post saved"),window.location.reload()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,a=t.name,r=t.value;("username"===a&&r.length<=280||"username"!==a)&&o(Object(s.a)(Object(s.a)({},n),{},Object(C.a)({},a,r)))};return Object(x.jsx)("div",{style:{color:"#fdd05a",fontFamily:"Menlo",fontSize:"3vw",backgroundSize:"cover",margin:"0",height:"200vh",backgroundColor:"#1c2529",width:"100%"},children:Object(x.jsx)("div",{className:"form-container",children:Object(x.jsx)(D.a,{onSubmit:p,noValidate:!0,className:j?"loading":"",style:{color:"white"},children:Object(x.jsxs)(D.a.Field,{children:[Object(x.jsx)("h1",{children:"Create a Post:"}),Object(x.jsx)(D.a.Input,{className:"instrument",style:{color:"white"},label:"Instrument",placholder:"Instrument..",name:"instrument",value:n.instrument,onChange:b}),Object(x.jsx)(D.a.Input,{label:"Genre",placholder:"Genre..",name:"genre",value:n.genre,onChange:b}),Object(x.jsx)(D.a.Input,{label:"Title",placholder:"Title..",name:"title",value:n.title,onChange:b}),Object(x.jsx)(D.a.Input,{className:"discription-form",label:"Description",placholder:"Description..",name:"description",value:n.description,onChange:b}),Object(x.jsx)(D.a.Input,{label:"Contact",placholder:"contact..",name:"contact",value:n.contact,onChange:b}),Object(x.jsx)(z.a,{className:"button-form",disabled:!Object(s.a)({},n),type:"submit",variant:"success",children:"Save Post"})]})})})})},Q=n(180),K=n(244),X=n(246),Z=n(241),ee=n(179),te=Object(Q.a)({uri:"/graphql"}),ne=Object(ee.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(s.a)(Object(s.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ae=new K.a({link:ne.concat(te),cache:new X.a});var oe=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=b.loggedIn();o(e)}),[]),Object(x.jsx)(Z.a,{client:ae,children:Object(x.jsxs)(i.a,{children:[n?Object(x.jsx)(R,{}):Object(x.jsx)(g,{}),n?Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/home",component:S}),Object(x.jsx)(l.b,{exact:!0,path:"/viewallposts",component:q}),Object(x.jsx)(l.b,{exact:!0,path:"/",component:q}),Object(x.jsx)(l.b,{exact:!0,path:"/viewmyposts",component:W}),Object(x.jsx)(l.b,{exact:!0,path:"/createpost",component:J}),Object(x.jsx)(l.b,{render:function(){return Object(x.jsx)(l.a,{to:"/"})}})]}):Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/",component:S}),Object(x.jsx)(l.b,{exact:!0,path:"/login",component:A}),Object(x.jsx)(l.b,{exact:!0,path:"/signup",component:M}),Object(x.jsx)(l.b,{render:function(){return Object(x.jsx)(l.a,{to:"/"})}})]})]})})};r.a.render(Object(x.jsx)(oe,{}),document.getElementById("root"))}},[[222,1,2]]]);
//# sourceMappingURL=main.198cee4d.chunk.js.map